<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Imposter Game</title>

<style>
body {
    background-color: #121212;
    color: #eee;
    font-family: Arial, sans-serif;
    margin: 0;
}
h1 { text-align: center; margin-top: 20px; font-size: 28px; }

button {
    background-color: #1e1e1e;
    color: white;
    border: none;
    padding: 14px;
    margin: 8px;
    border-radius: 12px;
    font-size: 20px;
    width: 80%;
    cursor: pointer;
}
button.green { background-color: #4CAF50; }
button.gray { background-color: #2a2a2a; }

input, select {
    padding: 12px;
    font-size: 18px;
    width: 70%;
    margin-bottom: 12px;
}

.screen { display: none; }
.screen.active { display: flex; flex-direction: column; align-items: center; }

.container { padding: 20px; text-align:center; }

.toggle-btn { width: 80%; }

#homeButton {
    position: fixed;
    top: 10px;
    right: 10px;
    padding: 8px 16px;
    font-size: 16px;
    border-radius: 8px;
    background-color:#4CAF50;
    width: auto;
}

#roleOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

#roleCard {
    background-color: #1e1e1e;
    padding: 40px;
    border-radius: 20px;
}

#roleCard h2 { font-size: 48px; }
#roleCard pre { font-size: 30px; white-space: pre-wrap; }

#starterText { font-size:36px; color:#4CAF50; }
#turnInfo { font-size: 16px; color:#ccc; }
</style>
</head>

<body>
<div class="container">

<h1>Imposter Game</h1>
<button id="homeButton">üè† Home</button>
<div id="turnInfo"></div>

<!-- SETUP -->
<div id="setup" class="screen active">

<input type="text" id="playerName" placeholder="Player name">
<button id="addPlayerBtn">Add Player</button>
<div id="players"></div>

<label>Number of Imposters</label>
<input type="number" id="imposterCount" min="1" value="1" style="width:90px;text-align:center;">

<label>Choose Topic</label>
<select id="topicSelect"></select>

<button id="startGameBtn" class="green">START GAME</button>

<button id="topicToggle" class="toggle-btn green">Show Topic to Players: ON</button>
<button id="hintToggle" class="toggle-btn green">Imposter sees Hint: ON</button>

</div>

<!-- STARTER -->
<div id="starterScreen" class="screen">
    <h2>All players have seen their roles</h2>
    <h2 id="starterText"></h2>
</div>

<!-- ROLE -->
<div id="roleOverlay">
    <div id="roleCard">
        <h2 id="roleTitle"></h2>
        <pre id="roleText"></pre>
        <button id="doneRoleBtn" class="green">DONE (PASS PHONE)</button>
    </div>
</div>

</div>

<script>
// ------------------------
// TOPICS
// ------------------------
const defaultTopics = {
  "Places": {
    "School": "Books",
    "Airport": "Waiting",
    "Hospital": "Bright lights",
    "Beach": "Bare feet",
    "Mall": "Crowds",
    "Gym": "Sweat",
    "Library": "Whispers",
    "Office": "Schedules",
    "Restaurant": "Menus",
    "Park": "Benches",
    "Theater": "Darkness",
    "Stadium": "Echoes",
    "Cafe": "Aroma",
    "Train Station": "Tracks",
    "Museum": "Artifacts",
    "Hotel": "Luggage",
    "Bank": "Lines",
    "Playground": "Slides",
    "Cinema": "Popcorn",
    "Bridge": "Height",
    "Forest": "Leaves",
    "Zoo": "Cages",
    "Airport Lounge": "Comfort",
    "Parking Lot": "Spaces",
    "Temple": "Incense"
  },

  "Animals": {
    "Dog": "Leash",
    "Cat": "Silence",
    "Elephant": "Memory",
    "Lion": "Territory",
    "Penguin": "Waddle",
    "Shark": "Movement",
    "Horse": "Rhythm",
    "Bird": "Height",
    "Snake": "Stillness",
    "Bear": "Weight",
    "Rabbit": "Startle",
    "Wolf": "Distance",
    "Frog": "Jump",
    "Fox": "Cunning",
    "Dolphin": "Echo",
    "Giraffe": "Neck",
    "Kangaroo": "Pouch",
    "Owl": "Night",
    "Tiger": "Stripes",
    "Elephant Seal": "Bulk",
    "Crab": "Sideways",
    "Ant": "March",
    "Bee": "Buzz",
    "Butterfly": "Flutter",
    "Squirrel": "Scurry"
  },

  "Food": {
    "Pizza": "Grease",
    "Burger": "Hands",
    "Sushi": "Precision",
    "Tacos": "Messy",
    "Pasta": "Twisting",
    "Ice Cream": "Dripping",
    "Steak": "Cut",
    "Soup": "Steam",
    "Salad": "Mixing",
    "Sandwich": "Layers",
    "Pancakes": "Stacking",
    "Fries": "Salt",
    "Bagel": "Spread",
    "Dumplings": "Fold",
    "Donut": "Sprinkles",
    "Chocolate": "Sweet",
    "Apple Pie": "Cinnamon",
    "Rice": "Bowl",
    "Popcorn": "Kernel",
    "Hotdog": "Ketchup",
    "Omelette": "Fold",
    "Cheese": "Stretch",
    "Sausage": "Link",
    "Cereal": "Milk",
    "Smoothie": "Blend"
  },

  "Objects": {
    "Phone": "Vibration",
    "Laptop": "Keys",
    "Backpack": "Weight",
    "Watch": "Glance",
    "Headphones": "Isolation",
    "Chair": "Stillness",
    "Table": "Surface",
    "Mirror": "Reflection",
    "Door": "Pause",
    "Wallet": "Routine",
    "Keys": "Pocket",
    "Lamp": "Glow",
    "Book": "Pages",
    "Pen": "Tip",
    "Glasses": "Sight",
    "Bag": "Strap",
    "Camera": "Lens",
    "Bottle": "Cap",
    "Cup": "Sip",
    "Phone Charger": "Cord",
    "Umbrella": "Rain",
    "Shoes": "Step",
    "Hat": "Shade",
    "Clock": "Tick",
    "TV": "Screen"
  },

  "Jobs": {
    "Teacher": "Repetition",
    "Doctor": "Late nights",
    "Engineer": "Diagrams",
    "Chef": "Timing",
    "Firefighter": "Heat",
    "Programmer": "Debugging",
    "Artist": "Blank space",
    "Writer": "Drafts",
    "Cashier": "Scanning",
    "Mechanic": "Hands",
    "Photographer": "Angles",
    "Manager": "Meetings",
    "Nurse": "Rounds",
    "Actor": "Stage",
    "Pilot": "Controls",
    "Dancer": "Movement",
    "Musician": "Notes",
    "Farmer": "Harvest",
    "Baker": "Oven",
    "Soldier": "March",
    "Scientist": "Lab",
    "Barista": "Steam",
    "Driver": "Wheel",
    "Lawyer": "Arguments",
    "Designer": "Sketch"
  },

  "Movies": {
    "Titanic": "Cold",
    "Inception": "Layers",
    "Star Wars": "Legacy",
    "Jurassic Park": "Containment",
    "The Matrix": "Choice",
    "Avengers": "Assembly",
    "Jaws": "Anticipation",
    "Rocky": "Persistence",
    "Alien": "Isolation",
    "Gladiator": "Crowd",
    "Interstellar": "Distance",
    "Up": "Loss",
    "Frozen": "Ice",
    "Coco": "Memory",
    "Finding Nemo": "Journey",
    "Incredibles": "Family",
    "Shrek": "Swamp",
    "Avatar": "Blue",
    "Titan": "Fall",
    "Hobbit": "Journey",
    "Harry Potter": "Magic",
    "Moana": "Ocean",
    "Black Panther": "Kingdom",
    "Soul": "Music",
    "Zootopia": "Animals"
  },

  "Video Games": {
    "Minecraft": "Blocks",
    "Fortnite": "Circles",
    "Among Us": "Silence",
    "Zelda": "Puzzles",
    "Call of Duty": "Reflexes",
    "Pokemon": "Collection",
    "Skyrim": "Wandering",
    "Mario Kart": "Momentum",
    "Dark Souls": "Patience",
    "Valorant": "Positioning",
    "Stardew Valley": "Routine",
    "GTA": "Freedom",
    "Animal Crossing": "Trading",
    "Overwatch": "Teamwork",
    "League of Legends": "Lanes",
    "Tetris": "Falling",
    "The Sims": "Choices",
    "Fortnite Creative": "Build",
    "Elden Ring": "Exploration",
    "Hollow Knight": "Jumping",
    "Candy Crush": "Matching",
    "Among Trees": "Survival",
    "Terraria": "Mining",
    "Subnautica": "Diving",
    "Dead Cells": "Rolling"
  },

  "Fruits": {
    "Apple": "Crunch",
    "Banana": "Peel",
    "Orange": "Segments",
    "Strawberry": "Seeds",
    "Mango": "Juice",
    "Grapes": "Clusters",
    "Pineapple": "Texture",
    "Peach": "Fuzz Pink",
    "Cherry": "Pair",
    "Watermelon": "Drips",
    "Blueberry": "Scatter",
    "Lemon": "Reaction",
    "Kiwi": "Hairy",
    "Plum": "Stone",
    "Pear": "Soft",
    "Apricot": "Fuzzy",
    "Raspberry": "Tiny",
    "Blackberry": "Bush",
    "Cantaloupe": "Sweet",
    "Papaya": "Tropical",
    "Pomegranate": "Seeds",
    "Fig": "Soft",
    "Coconut": "Hard shell",
    "Grapefruit": "Bitter",
    "Dragonfruit": "Spiky"
  },
  "Clash Royale Cards": {
  "Hog Rider": "4",
  "Mega Knight": "Arrival",
  "Princess": "Legendary",
  "Goblin Barrel": "Epic",
  "Electro Wizard": "Two",
  "Valkyrie": "Baddie",
  "P.E.K.K.A": "Heavy",
  "Mini P.E.K.K.A": "Quick",
  "Skeleton Army": "Many",
  "Balloon": "5",
  "Lava Hound": "Large",
  "Baby Dragon": "Flight",
  "Inferno Tower": "Rare",
  "Inferno Dragon": "4",
  "Royal Giant": "Range",
  "Knight": "Common",
  "Ice Spirit": "Stun",
  "Fireball": "Area Damage",
  "Zap": "Instant",
  "Log": "Legendary",
  "Miner": "Baddie",
  "Graveyard": "Many",
  "X-Bow": "Epic",
  "Mortar": "Common",
  "Elite Barbarians": "Fucking gay restards"
    },

    "Random": {
  "Burt": "M&M",
  "Low Taper Fade": "Massive",
  "Yellas": "Horable",
  "Diff EQ": "Dropped Out",
  "Joe": "Mama",
  "Nihkil": "Smells",
  "Caden": "Wise",
  "Bagles On The Hudson": "Jordan",
    },
    "Slurs": {
  "Nigga": "Kobe",
  "Nigger": "Meaningless",
  "Faggot": "David",
  "Cracker": "White",
  "Jews": "10% Off",
  "Arabs": "7/11",
  "Adolf": "Germans",
  "Retard": "Caden",
    },

  "Activities": {
    "Driving": "Focus",
    "Cooking": "Timing",
    "Reading": "Immersion",
    "Gaming": "Engagement",
    "Exercising": "Breath",
    "Studying": "Repetition",
    "Shopping": "Choices",
    "Cleaning": "Order",
    "Drawing": "Control",
    "Writing": "Revising",
    "Swimming": "Stroke",
    "Hiking": "Trail",
    "Fishing": "Patience",
    "Dancing": "Beat",
    "Singing": "Pitch",
    "Painting": "Brush",
    "Jogging": "Steps",
    "Meditating": "Stillness",
    "Photography": "Framing",
    "Traveling": "Luggage",
    "Yoga": "Stretch",
    "Camping": "Fire",
    "Cycling": "Pedal",
    "Skateboarding": "Ramp",
    "Surfing": "Wave"

  }
};
let topics = JSON.parse(localStorage.getItem("imposterTopics")) || defaultTopics;

// ------------------------
// STATE
// ------------------------
let players = [];
let roles = {};
let viewed = [];
let currentTopic="", currentWord="", currentHint="";
let showTopic = true;
let showHint = true;
let currentPlayer="";

// ------------------------
// DOM
// ------------------------
const playersDiv = document.getElementById("players");
const topicSelect = document.getElementById("topicSelect");
const topicToggle = document.getElementById("topicToggle");
const hintToggle = document.getElementById("hintToggle");

// ------------------------
// POPULATE TOPICS
// ------------------------
topicSelect.innerHTML = `<option value="RANDOM">üé≤ Random Topic</option>`;
Object.keys(topics).forEach(t=>{
    const o=document.createElement("option");
    o.value=t; o.textContent=t;
    topicSelect.appendChild(o);
});

// ------------------------
// TOGGLES
// ------------------------
topicToggle.onclick = ()=>{
    showTopic=!showTopic;
    topicToggle.textContent=`Show Topic to Players: ${showTopic?"ON":"OFF"}`;
    topicToggle.className=`toggle-btn ${showTopic?"green":"gray"}`;
};

hintToggle.onclick = ()=>{
    showHint=!showHint;
    hintToggle.textContent=`Imposter sees Hint: ${showHint?"ON":"OFF"}`;
    hintToggle.className=`toggle-btn ${showHint?"green":"gray"}`;
};

// ------------------------
// PLAYERS
// ------------------------
function renderPlayers(){
    playersDiv.innerHTML="";
    players.forEach(p=>{
        const row=document.createElement("div");
        row.style.display="flex";
        row.style.width="90%";
        row.style.margin="6px auto";

        const btn=document.createElement("button");
        btn.style.flex="1";
        btn.textContent=p+(viewed.includes(p)?" ‚úî":"");
        btn.onclick=()=>showRoleForPlayer(p);

        const del=document.createElement("button");
        del.textContent="‚ùå";
        del.style.width="50px";
        del.style.background="#aa3333";
        del.onclick=e=>{
            e.stopPropagation();
            players=players.filter(x=>x!==p);
            viewed=viewed.filter(x=>x!==p);
            renderPlayers();
        };

        row.append(btn,del);
        playersDiv.appendChild(row);
    });
    turnInfo.textContent=`Players done: ${viewed.length}/${players.length}`;
}

addPlayerBtn.onclick=()=>{
    const n=playerName.value.trim();
    if(n&&!players.includes(n)){
        players.push(n);
        playerName.value="";
        renderPlayers();
    }
};

playerName.onkeypress=e=>{
    if(e.key==="Enter") addPlayerBtn.click();
};

// ------------------------
// START GAME
// ------------------------
startGameBtn.onclick=()=>{
    if(players.length<3) return alert("Need at least 3 players");

    const sel=topicSelect.value;
    currentTopic = sel==="RANDOM"
        ? Object.keys(topics)[Math.floor(Math.random()*Object.keys(topics).length)]
        : sel;

    const entries=Object.entries(topics[currentTopic]);
    [currentWord,currentHint]=entries[Math.floor(Math.random()*entries.length)];

    const shuffled=[...players].sort(()=>Math.random()-0.5);
    const imposters=shuffled.slice(0,imposterCount.value);

    roles={};
    players.forEach(p=>{
        roles[p]=imposters.includes(p)?"IMPOSTER":"CREWMATE";
    });

    viewed=[];
    renderPlayers();
    alert("Game ready! Pass the phone.");
};

// ------------------------
// ROLE VIEW
// ------------------------
function showRoleForPlayer(name){
    currentPlayer=name;
    const r=roles[name];
    let t=r==="IMPOSTER"?"YOU ARE THE IMPOSTER":"YOU ARE A CREWMATE";
    if(showTopic) t+=`\n\nTopic: ${currentTopic}`;
    if(r==="CREWMATE") t+=`\nWord: ${currentWord}`;
    if(r==="IMPOSTER"&&showHint) t+=`\nHint: ${currentHint}`;
    roleTitle.textContent=name;
    roleText.textContent=t;
    roleOverlay.style.display="flex";
}

doneRoleBtn.onclick=()=>{
    viewed.push(currentPlayer);
    roleOverlay.style.display="none";
    renderPlayers();
    if(viewed.length===players.length){
        starterText.textContent=
          `${players[Math.floor(Math.random()*players.length)]} GOES FIRST üî•`;
        setup.classList.remove("active");
        starterScreen.classList.add("active");
    }
};

homeButton.onclick=()=>{
    starterScreen.classList.remove("active");
    setup.classList.add("active");
};
</script>
</body>
</html>
